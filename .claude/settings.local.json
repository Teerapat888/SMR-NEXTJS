{
  "permissions": {
    "allow": [
      "Bash(npx create-next-app@latest:*)",
      "Bash(npm init:*)",
      "Bash(npm install:*)",
      "Bash(npx prisma generate:*)",
      "Bash(npx prisma db push:*)",
      "Bash(npx tsx:*)",
      "Bash(dir /b \"c:\\\\Users\\\\Teera\\\\Desktop\\\\SMR-NEXTJS\\\\src\\\\app\")",
      "Bash(dir:*)",
      "Bash(cmd /c:*)",
      "Bash(python3:*)",
      "Bash(node:*)",
      "Bash(/tmp/gen-login.js:*)",
      "Bash(/tmp/encode-login.js:*)",
      "Bash(/tmp/test.js << 'XEOF'\nconsole.log\\(\"hello\"\\)\nvar x = \"it's working\"\nvar y = \"test\\(''\\)\"\nconsole.log\\(x, y\\)\nXEOF)",
      "Bash(/tmp/test2.js << 'XEOF'\nvar lines = [\n  \"  const [username, setUsername] = useState\\(''\\)\",\n  \"  setError\\('\\\\u0E0A\\\\u0E37\\\\u0E48\\\\u0E2D'\\)\",\n  \"    if \\(e.ctrlKey && e.key === 'd'\\) {\",\n]\nconsole.log\\(\"ok\", lines.length\\)\nXEOF)",
      "Bash(/tmp/test3.js << 'XEOF'\nvar lines = [\n  \"  const [username, setUsername] = useState\\(''\\)\",\n  \"  setError\\('\\\\u0E0A\\\\u0E37\\\\u0E48\\\\u0E2D\\\\u0E1C\\\\u0E39\\\\u0E49\\\\u0E43\\\\u0E0A\\\\u0E49\\\\u0E2B\\\\u0E23\\\\u0E37\\\\u0E2D\\\\u0E23\\\\u0E2B\\\\u0E31\\\\u0E2A\\\\u0E1C\\\\u0E48\\\\u0E32\\\\u0E19\\\\u0E44\\\\u0E21\\\\u0E48\\\\u0E16\\\\u0E39\\\\u0E01\\\\u0E15\\\\u0E49\\\\u0E2D\\\\u0E07'\\)\",\n  \"    if \\(e.ctrlKey && e.key === 'd'\\) {\",\n  \"      setUsername\\('doctor1'\\)\",\n  \"      setPassword\\('password123'\\)\",\n  \"      setError\\(''\\)\",\n  \"      const result = await signIn\\('credentials', {\",\n  \"        router.push\\('/dashboard'\\)\",\n  \"      } else if \\(role === 'triage'\\) {\",\n  \"        router.push\\('/register'\\)\",\n  \"        router.push\\('/dashboard'\\)\",\n  \"      setError\\('\\\\u0E40\\\\u0E01\\\\u0E34\\\\u0E14\\\\u0E02\\\\u0E49\\\\u0E2D\\\\u0E1C\\\\u0E34\\\\u0E14\\\\u0E1E\\\\u0E25\\\\u0E32\\\\u0E14\\\\u0E43\\\\u0E19\\\\u0E01\\\\u0E32\\\\u0E23\\\\u0E40\\\\u0E0A\\\\u0E37\\\\u0E48\\\\u0E2D\\\\u0E21\\\\u0E15\\\\u0E48\\\\u0E2D \\\\u0E01\\\\u0E23\\\\u0E38\\\\u0E13\\\\u0E32\\\\u0E25\\\\u0E2D\\\\u0E07\\\\u0E43\\\\u0E2B\\\\u0E21\\\\u0E48\\\\u0E2D\\\\u0E35\\\\u0E01\\\\u0E04\\\\u0E23\\\\u0E31\\\\u0E49\\\\u0E07'\\)\",\n  \"    window.addEventListener\\('keydown', handleDebugShortcut\\)\",\n  \"    return \\(\\) => window.removeEventListener\\('keydown', handleDebugShortcut\\)\",\n  \"      const sessionRes = await fetch\\('/api/auth/session'\\)\",\n  \"      const role: string = session?.user?.role ?? ''\",\n  \"      if \\(role === 'admin' || role === 'nurse'\\) {\",\n  \"          backgroundSize: '60px 60px',\",\n  \"            'radial-gradient\\(...\\)',\",\n]\nconsole.log\\(\"ok\", lines.length\\)\nXEOF)",
      "Bash(/tmp/write-part2.js << 'XEOF'\nvar fs = require\\(\"fs\"\\)\nvar content = \"\\\\n  return \\(\\\\n    <div className=\\\\\"min-h-screen flex items-center justify-center relative overflow-hidden\\\\\">\\\\n      {/* Gradient background */}\\\\n      <div className=\\\\\"absolute inset-0 bg-gradient-to-br from-teal-900 via-teal-800 to-emerald-900\\\\\" />\\\\n\\\\n      {/* Subtle dot pattern overlay */}\\\\n      <div\\\\n        className=\\\\\"absolute inset-0 opacity-10\\\\\"\\\\n        style={{\\\\n          backgroundImage:\\\\n            'radial-gradient\\(circle at 25% 25%, rgba\\(255,255,255,0.15\\) 1px, transparent 1px\\), radial-gradient\\(circle at 75% 75%, rgba\\(255,255,255,0.1\\) 1px, transparent 1px\\)',\\\\n          backgroundSize: '60px 60px',\\\\n        }}\\\\n      />\\\\n\\\\n      {/* Decorative glowing orbs */}\\\\n      <div className=\\\\\"absolute -top-32 -left-32 w-96 h-96 rounded-full bg-teal-500/20 blur-3xl\\\\\" />\\\\n      <div className=\\\\\"absolute -bottom-24 -right-24 w-80 h-80 rounded-full bg-emerald-400/20 blur-3xl\\\\\" />\\\\n      <div className=\\\\\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] rounded-full bg-teal-600/10 blur-3xl\\\\\" />\\\\n\\\\n      {/* Login card */}\\\\n      <div className=\\\\\"relative z-10 w-full max-w-md mx-4 animate-fade-in\\\\\">\\\\n        <div className=\\\\\"bg-white/95 backdrop-blur-xl rounded-3xl shadow-2xl shadow-black/20 overflow-hidden\\\\\">\\\\n          {/* Header / Logo area */}\\\\n          <div className=\\\\\"relative bg-gradient-to-r from-teal-600 to-emerald-600 px-8 pt-10 pb-8 text-center\\\\\">\\\\n            <div className=\\\\\"relative inline-flex items-center justify-center mb-4\\\\\">\\\\n              <div className=\\\\\"absolute w-20 h-20 rounded-full bg-white/20 animate-pulse-ring\\\\\" />\\\\n              <div className=\\\\\"relative w-16 h-16 rounded-2xl bg-white/20 backdrop-blur-sm flex items-center justify-center border border-white/30\\\\\">\\\\n                <HeartPulse className=\\\\\"w-9 h-9 text-white\\\\\" strokeWidth={2.2} />\\\\n              </div>\\\\n            </div>\\\\n\\\\n            <h1 className=\\\\\"text-2xl font-bold text-white tracking-tight\\\\\">\\\\n              Smart ER\\\\n            </h1>\\\\n            <p className=\\\\\"text-teal-100 text-sm mt-1 font-light\\\\\">\\\\n              \\\\u0E23\\\\u0E30\\\\u0E1A\\\\u0E1A\\\\u0E08\\\\u0E31\\\\u0E14\\\\u0E01\\\\u0E32\\\\u0E23\\\\u0E04\\\\u0E34\\\\u0E27\\\\u0E2B\\\\u0E49\\\\u0E2D\\\\u0E07\\\\u0E09\\\\u0E38\\\\u0E01\\\\u0E40\\\\u0E09\\\\u0E34\\\\u0E19\\\\u0E2D\\\\u0E31\\\\u0E08\\\\u0E09\\\\u0E23\\\\u0E34\\\\u0E22\\\\u0E30\\\\n            </p>\\\\n\\\\n            {/* Decorative bottom wave */}\\\\n            <div className=\\\\\"absolute bottom-0 left-0 right-0\\\\\">\\\\n              <svg\\\\n                viewBox=\\\\\"0 0 400 24\\\\\"\\\\n                className=\\\\\"w-full h-6 text-white/95\\\\\"\\\\n                preserveAspectRatio=\\\\\"none\\\\\"\\\\n              >\\\\n                <path\\\\n                  d=\\\\\"M0,24 L0,8 Q50,0 100,8 T200,8 T300,8 T400,8 L400,24 Z\\\\\"\\\\n                  fill=\\\\\"currentColor\\\\\"\\\\n                />\\\\n              </svg>\\\\n            </div>\\\\n          </div>\\\\n\"\nfs.writeFileSync\\(\"/tmp/login-part2.txt\", content, \"utf8\"\\)\nconsole.log\\(\"Part 2 written: \" + content.split\\(\"\\\\n\"\\).length + \" lines\"\\)\nXEOF)",
      "Bash(/tmp/write-part3.js:*)",
      "Bash(/tmp/write-part4.js:*)",
      "Bash(/tmp/combine-login.js << 'XEOF'\nvar fs = require\\(\"fs\"\\)\nvar p1 = fs.readFileSync\\(\"/tmp/login-part1.txt\", \"utf8\"\\)\nvar p2 = fs.readFileSync\\(\"/tmp/login-part2.txt\", \"utf8\"\\)\nvar p3 = fs.readFileSync\\(\"/tmp/login-part3.txt\", \"utf8\"\\)\nvar p4 = fs.readFileSync\\(\"/tmp/login-part4.txt\", \"utf8\"\\)\nvar full = p1 + p2 + p3 + p4\nvar target = \"c:/Users/Teera/Desktop/SMR-NEXTJS/src/app/login/page.tsx\"\nfs.mkdirSync\\(require\\(\"path\"\\).dirname\\(target\\), { recursive: true }\\)\nfs.writeFileSync\\(target, full, \"utf8\"\\)\nconsole.log\\(\"SUCCESS: Written \" + full.split\\(\"\\\\n\"\\).length + \" lines to \" + target\\)\nXEOF)",
      "Bash(npx tsc:*)",
      "Bash(\"c:/Users/Teera/Desktop/SMR-NEXTJS/src/app/api/beds/route.ts\" << 'ENDOFFILE'\nimport { prisma } from '@/lib/prisma'\nimport { NextResponse } from 'next/server'\n\nexport async function GET\\(\\) {\n  try {\n    const beds = await prisma.bed.findMany\\({\n      orderBy: { id: 'asc' },\n    }\\)\n\n    // For occupied beds, get patient info\n    const bedsWithPatients = await Promise.all\\(\n      beds.map\\(async \\(bed\\) => {\n        let patient = null\n        if \\(bed.patientId\\) {\n          patient = await prisma.patient.findUnique\\({\n            where: { id: bed.patientId },\n          }\\)\n        }\n        return { ...bed, patient }\n      }\\)\n    \\)\n\n    const available = beds.filter\\(\\(b\\) => b.status === 'available'\\).length\n    const occupied = beds.filter\\(\\(b\\) => b.status === 'occupied'\\).length\n    const queueCount = await prisma.queue.count\\({\n      where: { status: 'waiting' },\n    }\\)\n\n    return NextResponse.json\\({\n      success: true,\n      beds: bedsWithPatients,\n      stats: { available, occupied, queueCount },\n    }\\)\n  } catch \\(error\\) {\n    console.error\\('Error fetching beds:', error\\)\n    return NextResponse.json\\(\n      { success: false, error: 'Failed to fetch beds' },\n      { status: 500 }\n    \\)\n  }\n}\nENDOFFILE)",
      "Bash(\"c:/Users/Teera/Desktop/SMR-NEXTJS/src/app/api/queues/route.ts\" << 'ENDOFFILE'\nimport { prisma } from '@/lib/prisma'\nimport { NextRequest, NextResponse } from 'next/server'\n\nexport async function GET\\(\\) {\n  try {\n    const waiting = await prisma.queue.findMany\\({\n      where: { status: 'waiting' },\n      orderBy: { createdAt: 'asc' },\n      include: {\n        patient: {\n          select: {\n            id: true,\n            hn: true,\n            firstName: true,\n            lastName: true,\n          },\n        },\n      },\n    }\\)\n\n    const called = await prisma.queue.findMany\\({\n      where: { status: 'called' },\n      orderBy: { calledAt: 'desc' },\n      include: {\n        patient: {\n          select: {\n            id: true,\n            hn: true,\n            firstName: true,\n            lastName: true,\n          },\n        },\n      },\n    }\\)\n\n    return NextResponse.json\\({ success: true, waiting, called }\\)\n  } catch \\(error\\) {\n    console.error\\('Error fetching queues:', error\\)\n    return NextResponse.json\\(\n      { success: false, error: 'Failed to fetch queues' },\n      { status: 500 }\n    \\)\n  }\n}\n\nexport async function POST\\(request: NextRequest\\) {\n  try {\n    const body = await request.json\\(\\)\n    const { patientId } = body\n\n    if \\(!patientId\\) {\n      return NextResponse.json\\(\n        { success: false, error: 'patientId is required' },\n        { status: 400 }\n      \\)\n    }\n\n    // Verify patient exists\n    const patient = await prisma.patient.findUnique\\({\n      where: { id: patientId },\n    }\\)\n\n    if \\(!patient\\) {\n      return NextResponse.json\\(\n        { success: false, error: 'Patient not found' },\n        { status: 404 }\n      \\)\n    }\n\n    // Check if patient already has a waiting or called queue\n    const existingQueue = await prisma.queue.findFirst\\({\n      where: {\n        patientId,\n        status: { in: ['waiting', 'called'] },\n      },\n    }\\)\n\n    if \\(existingQueue\\) {\n      return NextResponse.json\\(\n        { success: false, error: 'Patient already has an active queue entry' },\n        { status: 409 }\n      \\)\n    }\n\n    const queue = await prisma.queue.create\\({\n      data: {\n        patientId,\n        status: 'waiting',\n      },\n      include: {\n        patient: {\n          select: {\n            id: true,\n            hn: true,\n            firstName: true,\n            lastName: true,\n          },\n        },\n      },\n    }\\)\n\n    return NextResponse.json\\({ success: true, queue }, { status: 201 }\\)\n  } catch \\(error\\) {\n    console.error\\('Error creating queue:', error\\)\n    return NextResponse.json\\(\n      { success: false, error: 'Failed to create queue entry' },\n      { status: 500 }\n    \\)\n  }\n}\nENDOFFILE)",
      "Bash(\"c:/Users/Teera/Desktop/SMR-NEXTJS/src/app/api/patients/route.ts\" << 'ENDOFFILE'\nimport { prisma } from '@/lib/prisma'\nimport { NextRequest, NextResponse } from 'next/server'\n\nexport async function GET\\(request: NextRequest\\) {\n  try {\n    const { searchParams } = new URL\\(request.url\\)\n    const hn = searchParams.get\\('hn'\\)\n\n    if \\(!hn\\) {\n      return NextResponse.json\\(\n        { success: false, error: 'Query parameter \"hn\" is required' },\n        { status: 400 }\n      \\)\n    }\n\n    const patient = await prisma.patient.findUnique\\({\n      where: { hn },\n    }\\)\n\n    if \\(!patient\\) {\n      return NextResponse.json\\(\n        { success: false, error: 'Patient not found' },\n        { status: 404 }\n      \\)\n    }\n\n    return NextResponse.json\\({ success: true, patient }\\)\n  } catch \\(error\\) {\n    console.error\\('Error searching patient:', error\\)\n    return NextResponse.json\\(\n      { success: false, error: 'Failed to search patient' },\n      { status: 500 }\n    \\)\n  }\n}\n\nexport async function POST\\(request: NextRequest\\) {\n  try {\n    const body = await request.json\\(\\)\n    const { hn, firstName, lastName } = body\n\n    if \\(!hn || !firstName || !lastName\\) {\n      return NextResponse.json\\(\n        { success: false, error: 'hn, firstName, and lastName are required' },\n        { status: 400 }\n      \\)\n    }\n\n    // Check if HN already exists\n    const existing = await prisma.patient.findUnique\\({\n      where: { hn },\n    }\\)\n\n    if \\(existing\\) {\n      return NextResponse.json\\(\n        { success: false, error: 'HN already exists' },\n        { status: 409 }\n      \\)\n    }\n\n    const patient = await prisma.patient.create\\({\n      data: {\n        hn,\n        firstName,\n        lastName,\n      },\n    }\\)\n\n    return NextResponse.json\\({ success: true, patient }, { status: 201 }\\)\n  } catch \\(error\\) {\n    console.error\\('Error creating patient:', error\\)\n    return NextResponse.json\\(\n      { success: false, error: 'Failed to create patient' },\n      { status: 500 }\n    \\)\n  }\n}\nENDOFFILE)",
      "Bash(\"c:/Users/Teera/Desktop/SMR-NEXTJS/src/app/api/generate-hn/route.ts\" << 'ENDOFFILE'\nimport { prisma } from '@/lib/prisma'\nimport { NextResponse } from 'next/server'\n\nexport async function GET\\(\\) {\n  try {\n    // Get all patients and find the max numeric HN\n    const patients = await prisma.patient.findMany\\({\n      select: { hn: true },\n      orderBy: { hn: 'desc' },\n    }\\)\n\n    let maxHn = 0\n\n    for \\(const patient of patients\\) {\n      const numericHn = parseInt\\(patient.hn, 10\\)\n      if \\(!isNaN\\(numericHn\\) && numericHn > maxHn\\) {\n        maxHn = numericHn\n      }\n    }\n\n    const nextHn = \\(maxHn + 1\\).toString\\(\\).padStart\\(7, '0'\\)\n\n    return NextResponse.json\\({ success: true, hn: nextHn }\\)\n  } catch \\(error\\) {\n    console.error\\('Error generating HN:', error\\)\n    return NextResponse.json\\(\n      { success: false, error: 'Failed to generate HN' },\n      { status: 500 }\n    \\)\n  }\n}\nENDOFFILE)",
      "Bash(\"c:/Users/Teera/Desktop/SMR-NEXTJS/src/app/api/google-tts/route.ts\" << 'ENDOFFILE'\nimport { NextRequest, NextResponse } from 'next/server'\n\nexport async function GET\\(request: NextRequest\\) {\n  try {\n    const { searchParams } = new URL\\(request.url\\)\n    const text = searchParams.get\\('text'\\)\n    const lang = searchParams.get\\('lang'\\) || 'th'\n\n    if \\(!text\\) {\n      return NextResponse.json\\(\n        { success: false, error: 'Query parameter \"text\" is required' },\n        { status: 400 }\n      \\)\n    }\n\n    // Limit text to 200 characters\n    const truncatedText = text.slice\\(0, 200\\)\n\n    const ttsUrl = new URL\\('https://translate.google.com/translate_tts'\\)\n    ttsUrl.searchParams.set\\('ie', 'UTF-8'\\)\n    ttsUrl.searchParams.set\\('tl', lang\\)\n    ttsUrl.searchParams.set\\('client', 'tw-ob'\\)\n    ttsUrl.searchParams.set\\('q', truncatedText\\)\n\n    const response = await fetch\\(ttsUrl.toString\\(\\), {\n      headers: {\n        'User-Agent':\n          'Mozilla/5.0 \\(Windows NT 10.0; Win64; x64\\) AppleWebKit/537.36 \\(KHTML, like Gecko\\) Chrome/120.0.0.0 Safari/537.36',\n      },\n    }\\)\n\n    if \\(!response.ok\\) {\n      return NextResponse.json\\(\n        { success: false, error: 'Failed to fetch TTS audio' },\n        { status: response.status }\n      \\)\n    }\n\n    const audioBuffer = await response.arrayBuffer\\(\\)\n\n    return new NextResponse\\(audioBuffer, {\n      status: 200,\n      headers: {\n        'Content-Type': 'audio/mpeg',\n        'Cache-Control': 'public, max-age=86400',\n      },\n    }\\)\n  } catch \\(error\\) {\n    console.error\\('Error fetching TTS:', error\\)\n    return NextResponse.json\\(\n      { success: false, error: 'Failed to fetch TTS audio' },\n      { status: 500 }\n    \\)\n  }\n}\nENDOFFILE)",
      "Bash(\"c:/Users/Teera/Desktop/SMR-NEXTJS/src/app/api/queue-calls/route.ts\" << 'ENDOFFILE'\nimport { prisma } from '@/lib/prisma'\nimport { NextResponse } from 'next/server'\n\nexport async function GET\\(\\) {\n  try {\n    const tenSecondsAgo = new Date\\(Date.now\\(\\) - 10 * 1000\\)\n\n    const queueCalls = await prisma.queueCall.findMany\\({\n      where: {\n        calledAt: {\n          gte: tenSecondsAgo,\n        },\n      },\n      orderBy: { calledAt: 'desc' },\n      include: {\n        queue: {\n          include: {\n            patient: {\n              select: {\n                id: true,\n                hn: true,\n                firstName: true,\n                lastName: true,\n              },\n            },\n          },\n        },\n      },\n    }\\)\n\n    const calls = queueCalls.map\\(\\(call\\) => \\({\n      id: call.id,\n      queueId: call.queueId,\n      calledAt: call.calledAt,\n      hn: call.queue.patient.hn,\n      firstName: call.queue.patient.firstName,\n      lastName: call.queue.patient.lastName,\n      patientId: call.queue.patient.id,\n    }\\)\\)\n\n    return NextResponse.json\\({ success: true, calls }\\)\n  } catch \\(error\\) {\n    console.error\\('Error fetching queue calls:', error\\)\n    return NextResponse.json\\(\n      { success: false, error: 'Failed to fetch queue calls' },\n      { status: 500 }\n    \\)\n  }\n}\nENDOFFILE)",
      "Bash(\"c:/Users/Teera/Desktop/SMR-NEXTJS/src/app/api/sound-settings/route.ts\" << 'ENDOFFILE'\nimport { prisma } from '@/lib/prisma'\nimport { NextRequest, NextResponse } from 'next/server'\n\nconst DEFAULT_SOUND_SETTINGS = {\n  enabled: true,\n  volume: 80,\n  voiceLang: 'th',\n  prefixText: 'ขอเชิญ',\n  suffixText: 'ที่ห้องตรวจ',\n  repeatCount: 2,\n  repeatDelay: 3000,\n}\n\nexport async function GET\\(\\) {\n  try {\n    const setting = await prisma.systemSetting.findUnique\\({\n      where: { settingKey: 'sound_settings' },\n    }\\)\n\n    let soundSettings = DEFAULT_SOUND_SETTINGS\n\n    if \\(setting?.settingValue\\) {\n      try {\n        soundSettings = {\n          ...DEFAULT_SOUND_SETTINGS,\n          ...JSON.parse\\(setting.settingValue\\),\n        }\n      } catch {\n        // If JSON parse fails, use defaults\n        soundSettings = DEFAULT_SOUND_SETTINGS\n      }\n    }\n\n    return NextResponse.json\\({ success: true, settings: soundSettings }\\)\n  } catch \\(error\\) {\n    console.error\\('Error fetching sound settings:', error\\)\n    return NextResponse.json\\(\n      { success: false, error: 'Failed to fetch sound settings' },\n      { status: 500 }\n    \\)\n  }\n}\n\nexport async function POST\\(request: NextRequest\\) {\n  try {\n    const body = await request.json\\(\\)\n\n    const soundSettings = {\n      enabled: body.enabled ?? DEFAULT_SOUND_SETTINGS.enabled,\n      volume: body.volume ?? DEFAULT_SOUND_SETTINGS.volume,\n      voiceLang: body.voiceLang ?? DEFAULT_SOUND_SETTINGS.voiceLang,\n      prefixText: body.prefixText ?? DEFAULT_SOUND_SETTINGS.prefixText,\n      suffixText: body.suffixText ?? DEFAULT_SOUND_SETTINGS.suffixText,\n      repeatCount: body.repeatCount ?? DEFAULT_SOUND_SETTINGS.repeatCount,\n      repeatDelay: body.repeatDelay ?? DEFAULT_SOUND_SETTINGS.repeatDelay,\n    }\n\n    await prisma.systemSetting.upsert\\({\n      where: { settingKey: 'sound_settings' },\n      update: {\n        settingValue: JSON.stringify\\(soundSettings\\),\n      },\n      create: {\n        settingKey: 'sound_settings',\n        settingValue: JSON.stringify\\(soundSettings\\),\n      },\n    }\\)\n\n    return NextResponse.json\\({ success: true, settings: soundSettings }\\)\n  } catch \\(error\\) {\n    console.error\\('Error saving sound settings:', error\\)\n    return NextResponse.json\\(\n      { success: false, error: 'Failed to save sound settings' },\n      { status: 500 }\n    \\)\n  }\n}\nENDOFFILE)",
      "Bash(ls:*)",
      "Bash(where:*)",
      "Bash(powershell -NoProfile -ExecutionPolicy Bypass -File - << 'PSEOF'\n$scriptPath = \"c:\\\\Users\\\\Teera\\\\Desktop\\\\SMR-NEXTJS\\\\_encode.js\"\n\n$part1 = @'\nconst fs = require\\(\"fs\"\\);\nconst targetPath = \"c:/Users/Teera/Desktop/SMR-NEXTJS/src/app/register/page.tsx\";\nconst BT = \"\\\\x60\";\nconst DS = \"\\\\x24\";\nfunction tlit\\(parts\\) {\n  let r = BT;\n  for \\(let i = 0; i < parts.length; i++\\) {\n    if \\(i % 2 === 0\\) { r += parts[i]; } else { r += DS + \"{\" + parts[i] + \"}\"; }\n  }\n  return r + BT;\n}\nconst lines = [];\nfunction p\\(s\\) { lines.push\\(s\\); }\nfunction blank\\(\\) { lines.push\\(\"\"\\); }\n\np\\(\"'use client'\"\\);\nblank\\(\\);\np\\(\"import { useState, useRef, useEffect, useCallback } from 'react'\"\\);\np\\(\"import { useSession } from 'next-auth/react'\"\\);\np\\(\"import { useRouter } from 'next/navigation'\"\\);\np\\(\"import Navbar from '@/components/Navbar'\"\\);\np\\(\"import toast, { Toaster } from 'react-hot-toast'\"\\);\np\\(\"import {\"\\);\np\\(\"  UserPlus,\"\\);\np\\(\"  Hash,\"\\);\np\\(\"  User,\"\\);\np\\(\"  Sparkles,\"\\);\np\\(\"  Loader2,\"\\);\np\\(\"  CheckCircle2,\"\\);\np\\(\"  Printer,\"\\);\np\\(\"  RotateCcw,\"\\);\np\\(\"  ListPlus,\"\\);\np\\(\"  ClipboardList,\"\\);\np\\(\"  AlertCircle,\"\\);\np\\(\"  Activity,\"\\);\np\\(\"} from 'lucide-react'\"\\);\nblank\\(\\);\np\\(\"interface RegisteredPatient {\"\\);\np\\(\"  id: string\"\\);\np\\(\"  hn: string\"\\);\np\\(\"  firstName: string\"\\);\np\\(\"  lastName: string\"\\);\np\\(\"  createdAt: string\"\\);\np\\(\"}\"\\);\nblank\\(\\);\np\\(\"export default function RegisterPage\\(\\) {\"\\);\np\\(\"  const { data: session, status } = useSession\\(\\)\"\\);\np\\(\"  const router = useRouter\\(\\)\"\\);\nblank\\(\\);\np\\(\"  const [hn, setHn] = useState\\(''\\)\"\\);\np\\(\"  const [firstName, setFirstName] = useState\\(''\\)\"\\);\np\\(\"  const [lastName, setLastName] = useState\\(''\\)\"\\);\np\\(\"  const [isAutoHn, setIsAutoHn] = useState\\(false\\)\"\\);\np\\(\"  const [isGeneratingHn, setIsGeneratingHn] = useState\\(false\\)\"\\);\np\\(\"  const [isSubmitting, setIsSubmitting] = useState\\(false\\)\"\\);\np\\(\"  const [isAddingToQueue, setIsAddingToQueue] = useState\\(false\\)\"\\);\np\\(\"  const [addedToQueue, setAddedToQueue] = useState\\(false\\)\"\\);\np\\(\"  const [registeredPatient, setRegisteredPatient] = useState<RegisteredPatient | null>\\(null\\)\"\\);\nblank\\(\\);\np\\(\"  const barcodeRef = useRef<HTMLCanvasElement>\\(null\\)\"\\);\np\\(\"  const jsBarcodeLoaded = useRef\\(false\\)\"\\);\nblank\\(\\);\np\\(\"  useEffect\\(\\(\\) => {\"\\);\np\\(\"    if \\(status === 'unauthenticated'\\) {\"\\);\np\\(\"      router.push\\('/login'\\)\"\\);\np\\(\"    }\"\\);\np\\(\"  }, [status, router]\\)\"\\);\nblank\\(\\);\np\\(\"  const renderBarcode = useCallback\\(\\(hnValue: string\\) => {\"\\);\np\\(\"    const doRender = \\(\\) => {\"\\);\np\\(\"      if \\(barcodeRef.current && \\(window as any\\).JsBarcode\\) {\"\\);\np\\(\"        try {\"\\);\np\\(\"          ;\\(window as any\\).JsBarcode\\(barcodeRef.current, hnValue, {\"\\);\np\\(\"            format: 'CODE128',\"\\);\np\\(\"            width: 2,\"\\);\np\\(\"            height: 60,\"\\);\np\\(\"            displayValue: true,\"\\);\np\\(\"            fontSize: 14,\"\\);\np\\(\"            margin: 5,\"\\);\np\\(\"            background: 'transparent',\"\\);\np\\(\"          }\\)\"\\);\np\\(\"        } catch {\"\\);\np\\(\"          console.error\\('Failed to render barcode'\\)\"\\);\np\\(\"        }\"\\);\np\\(\"      }\"\\);\np\\(\"    }\"\\);\nblank\\(\\);\np\\(\"    if \\(jsBarcodeLoaded.current || \\(window as any\\).JsBarcode\\) {\"\\);\np\\(\"      jsBarcodeLoaded.current = true\"\\);\np\\(\"      setTimeout\\(doRender, 50\\)\"\\);\np\\(\"      return\"\\);\np\\(\"    }\"\\);\nblank\\(\\);\np\\(\"    const script = document.createElement\\('script'\\)\"\\);\np\\(\"    script.src = 'https://cdn.jsdelivr.net/npm/jsbarcode@3.11.6/dist/JsBarcode.all.min.js'\"\\);\np\\(\"    script.onload = \\(\\) => {\"\\);\np\\(\"      jsBarcodeLoaded.current = true\"\\);\np\\(\"      doRender\\(\\)\"\\);\np\\(\"    }\"\\);\np\\(\"    document.head.appendChild\\(script\\)\"\\);\np\\(\"  }, []\\)\"\\);\n'@\n\n[System.IO.File]::WriteAllText\\($scriptPath, $part1, \\(New-Object System.Text.UTF8Encoding $false\\)\\)\nWrite-Output \"Part 1 written: $\\($part1.Length\\) chars\"\nPSEOF)",
      "Bash(powershell -NoProfile -ExecutionPolicy Bypass -Command \"$n=[char]10;$bt=[char]96;$ds=[char]36;$p=''c:\\\\Users\\\\Teera\\\\Desktop\\\\SMR-NEXTJS\\\\_final_gen.js'';$s=''const fs=require\\(''+[char]34+''fs''+[char]34+''\\);''+$n;$s+=''const p=''+[char]34+''c:/Users/Teera/Desktop/SMR-NEXTJS/src/app/register/page.tsx''+[char]34+'';''+$n;$s+=''const BT=String.fromCharCode\\(96\\);const DS=String.fromCharCode\\(36\\);''+$n;$s+=''function tl\\(a,b\\){return BT+a+DS+''+[char]34+''{''+[char]34+''+b+''+[char]34+''}''+[char]34+''+BT;}''+$n;$s+=''const L=[];''+$n;[System.IO.File]::WriteAllText\\($p,$s,[System.Text.Encoding]::UTF8\\);Write-Output ''Init done''\")",
      "Bash(powershell -NoProfile -ExecutionPolicy Bypass -File:*)",
      "Bash(npx next build)",
      "Bash(powershell.exe:*)",
      "Bash(/c/xampp/php/php.exe:*)",
      "Bash(\"C:\\\\Windows\\\\Microsoft.NET\\\\Framework64\\\\v4.0.30319\\\\csc.exe\" /target:winexe /out:startup.exe /reference:System.Windows.Forms.dll /reference:System.Drawing.dll startup.cs)",
      "Bash(curl:*)",
      "Bash(mysql:*)",
      "Bash(/c/xampp/mysql/bin/mysql.exe:*)",
      "Bash(npm run build:*)",
      "Bash(gh auth status:*)",
      "Bash(cmd.exe /c \"where gh\")",
      "Bash(cmd.exe /c \"where git\")",
      "Bash(git init:*)",
      "Bash(git add:*)"
    ]
  }
}
